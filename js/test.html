<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

</head>
<body>
    <audio id="player"></audio>
    <p onclick="start()">fkj</p>
<script>

//creating an audio context

var context;
var audioBuffer;

window.addEventListener('load', init);    

function init()
{

    try
    {
        window.AudioContext = window.AudioContext || window.webkitAudioContext;
        context=new AudioContext();

    }
    catch(e)
    {
        alert("Your browser doesn't support Web Audio API");
    }

    loadSound();
    // playSound();  // comment here
}

//loading sound into the created audio context
function loadSound()
{
    // set the audio file's URL
    var audioURL='AllofMe.mp3';

    //creating a new request
    var request = new XMLHttpRequest();
    request.open("GET",'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',true);
    request.responseType= 'arraybuffer';
    request.onload = function(){

        //take the audio from http request and decode it in an audio buffer
        context.decodeAudioData(request.response, function(buffer){
          audioBuffer = buffer;
          console.log(audioBuffer);
          if(audioBuffer){  // check here
            playSound();
          }
        });

    };

    request.send();

}



//playing the audio file
function playSound() {

    //creating source node
    var source = context.createBufferSource();
    //passing in file
    source.buffer = audioBuffer;

    //start playing
    source.connect(context.destination);  // added
    source.start(0);
    console.log('playing');

}

</script>
</body>
</html>